<!DOCTYPE html>
<html>
<head>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Heads vs Tails</title>
  <style>
    body { font-family: 'Courier New', monospace; background: #f0f2f5; color: #333; padding: 20px; display: flex; flex-direction: column; align-items: center; }
    .header { background: linear-gradient(135deg, #007BFF 0%, #00BFFF 100%); color: white; padding: 20px 40px; border-radius: 12px; text-align: center; width: 100%; max-width: 500px; box-shadow: 0 4px 15px rgba(0,0,0,0.2); margin-bottom: 30px; display: flex; flex-direction: column; align-items: center; }
    .header h1 { margin: 0 0 15px 0; font-size: 2.2em; font-weight: 600; }
    @keyframes chrome-shimmer { 0% { background-position: 100% 0; } 100% { background-position: 0% 0; } }
    @keyframes text-reveal { 0% { color: transparent; } 100% { color: white; } }
    .params-table { margin-top: 15px; border-collapse: collapse; width: 100%; font-size: 0.9rem; border: 1px solid rgba(255,255,255,0.3); border-radius: 8px; background: rgba(255,255,255,0.1); }
    .params-table tr { background: linear-gradient(120deg, transparent 40%, rgba(0,255,255,0.2) 45%, rgba(255,0,255,0.2) 50%, rgba(255,255,0,0.2) 55%, transparent 60%) no-repeat; background-size: 300% 100%; color: transparent; animation: chrome-shimmer 0.4s linear 1, text-reveal 0.4s ease-in 1 forwards; }
    .params-table td { padding: 8px; text-align: left; border-bottom: 1px solid rgba(255,255,255,0.2); color: inherit; }
    .results-table { border-collapse: collapse; width: 100%; max-width: 500px; box-shadow: 0 4px 15px rgba(0,0,0,0.1); border-radius: 12px; overflow: hidden; background: white; }
    .results-table td { padding: 18px; font-size: 2.0rem; font-weight: bold; border-bottom: 1px solid #e0e0e0; }
    .fancy-text { padding: 10px; font-family: monospace; font-size: 4rem; font-weight: bold; color: #ff6347; text-shadow: 2px 2px 0 #fff; }
    .error-text { color: #ffcccc; font-weight: bold; margin-top: 10px; font-size: 1.2em; }
  </style>
</head>
<body>
  <div class="header">
    <h1>Heads vs. Tails</h1>
    
    {% if outcome %}
      <div><span id="outcome-text" class="fancy-text" data-outcome="{{ outcome }}"></span></div>
    {% endif %}

    {% if error %}
      <div class="error-text">Error: {{ error }}</div>
    {% endif %}

    {% if params %}
    <table class="params-table">
      <tbody>
        {% for key, value in params.items() %}
        <tr>
          <td>{{ key }}</td>
          <td>{{ value }}</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
    {% endif %}
  </div>

  <table class="results-table">
    <tbody>
      <tr>
        <td>Heads:</td>
        <td>{{ totals.heads if totals else 0 }}</td>
      </tr>
      <tr>
        <td>Tails:</td>
        <td>{{ totals.tails if totals else 0 }}</td>
      </tr>
    </tbody>
  </table>
  <script>
    document.querySelectorAll('.params-table tr').forEach(el => {
      const min = 0.8;
      const max = 1.0;
      const delay = Math.random() * (max - min) + min;
      console.log(`Animation delay for element: ${delay}s`);
      el.style.animationDelay = delay + 's';
    });

    const outcomeEl = document.getElementById('outcome-text');
    if (outcomeEl) {
      const finalText = outcomeEl.getAttribute('data-outcome');
      const chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ';
      let iteration = 0;
      let interval = setInterval(() => {
        outcomeEl.innerText = finalText
          .split('')
          .map((letter, index) => {
            if(index < iteration) return finalText[index];
            return chars[Math.floor(Math.random() * chars.length)];
          })
          .join('');
        
        if(iteration >= finalText.length) { 
          clearInterval(interval);
          outcomeEl.innerText = finalText;
        }
        iteration += 1 / 3;
      }, 80);
    }
  </script>
</body>
</html>